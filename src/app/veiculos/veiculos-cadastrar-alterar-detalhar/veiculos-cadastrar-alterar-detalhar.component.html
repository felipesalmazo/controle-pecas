<div class="container-fluid">

  <app-titulo-pagina [titulo]="titulo"></app-titulo-pagina>

  <div>
    <form [formGroup]="veiculoForm" (ngSubmit)="cadastrar(veiculoForm.value)">
      <div class="row">
          <div class="col-lg-4 mt-3">
            <label for="pecasInput" class="fonte fomr-label">Placa:</label>
            <input formControlName="placa" [(ngModel)]="this.veiculo.placa" name="pecasInput" type="text" class="form-control" mask="AAA-AAAA"/>
            <div class="erro" *ngIf="veiculoForm.get('placa')?.errors?.['required'] && veiculoForm.get('placa')?.touched">Campo Placa é obrigatório!</div>
          </div>
          <div class="col-lg-4 mt-3">
            <label for="marcaInput" class="fonte fomr-label">Marca:</label>
            <input formControlName="marca" [(ngModel)]="this.veiculo.marca" name="marcaInput" type="text" class="form-control" maxlength="50"/>
            <div class="erro" *ngIf="veiculoForm.get('marca')?.errors?.['pattern'] && veiculoForm.get('marca')?.touched">Não digite Números e nem acentos!</div>
          </div>
          <div class="col-lg-4 mt-3">
            <label for="modeloInput" class="fonte fomr-label">Modelo:</label>
            <input formControlName="modelo" [(ngModel)]="this.veiculo.modelo" name="modeloInput" type="text" class="form-control" maxlength="50"/>
            <div class="erro" *ngIf="veiculoForm.get('modelo')?.errors?.['pattern'] && veiculoForm.get('modelo')?.touched">Não digite palavras com acento</div>
          </div>
          <div class="col-lg-4 mt-3">
            <label for="anoFabricInput" class="fonte fomr-label">Ano de Fabricação:</label>
            <input formControlName="anoFabricacao" [(ngModel)]="this.veiculo.anoFabricacao" name="anoFabricInput" type="text" class="form-control"/>
          </div>
          <div class="col-lg-4 mt-3">
            <label for="motorizacaoInput" class="fonte fomr-label">Motorizaçao:</label>
            <input formControlName="motorizacao" [(ngModel)]="this.veiculo.motorizacao" name="motorizacaoInput" type="text" class="form-control" maxlength="50"/>
          </div>
      </div>

      <div *ngIf="this.acao === 'detalhar' && this.listaPecas.length > 0" class="row">
        <label for="tabelaPecas" class="fonte fomr-label mt-5 mb-1">Peças pertencentes ao veículo:</label>
        <div name="tabelaPecas" class="col-lg-12 table-responsive">
          <table class="table table-light table-hover fonte">
            <thead>
              <tr class="table-dark">
                <th scope="col">Número de Série</th>
                <th scope="col">Marca</th>
                <th scope="col">Nome</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of listaPecas">
                <td>{{item.numeroSerie}}</td>
                <td>{{item.marca}}</td>
                <td>{{item.nome}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    
      <div class="row">
        <div style="display: flex; justify-content: space-between; margin-top: 0.5em;" class="col-lg-12">
          <div style="display: flex;">
            <button type="submit" class="btn btn-rodape fonte" *ngIf="mostraBotaoCadastrar" [disabled]="veiculoForm.invalid" >CADASTRAR</button>
            <button type="button" class="btn btn-rodape fonte" *ngIf="mostraBotaoAlterar" (click)="alterar()">ALTERAR</button>
            <button type="button" class="btn btn-rodape fonte" style="margin-left: 10px;" (click)="voltar()">VOLTAR</button>
          </div>
        </div>
      </div>
    </form>
  </div>
  
</div>
  

<app-modal #modal (event)="fecharModal()"></app-modal>
